<div class="change-password-container">
    <div class="change-password-card">
        <div class="change-password-header">
            <mat-icon class="header-icon">lock_reset</mat-icon>
            <h1 class="header-title">Change Password</h1>
            <p class="header-subtitle">Please create a new secure password</p>
        </div>

        <form (ngSubmit)="onSubmit()" class="change-password-form">
            <!-- Error Message -->
            <div *ngIf="errorMessage()" class="message message-error">
                <mat-icon>error</mat-icon>
                <span>{{ errorMessage() }}</span>
            </div>

            <!-- Success Message -->
            <div *ngIf="successMessage()" class="message message-success">
                <mat-icon>check_circle</mat-icon>
                <span>{{ successMessage() }}</span>
            </div>

            <!-- Current Password Field -->
            <mat-form-field appearance="fill">
                <mat-label>Current Password</mat-label>
                <input matInput [type]="hideCurrentPassword() ? 'password' : 'text'" [(ngModel)]="currentPassword"
                    name="currentPassword" placeholder="Enter current password" required [disabled]="loading()" />
                <mat-icon matPrefix>lock</mat-icon>
                <button mat-icon-button matSuffix type="button"
                    (click)="hideCurrentPassword.set(!hideCurrentPassword())" [disabled]="loading()">
                    <mat-icon>{{ hideCurrentPassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
            </mat-form-field>

            <!-- New Password Field -->
            <mat-form-field appearance="fill">
                <mat-label>New Password</mat-label>
                <input matInput [type]="hideNewPassword() ? 'password' : 'text'" [(ngModel)]="newPassword"
                    name="newPassword" placeholder="Enter new password" required [disabled]="loading()" />
                <mat-icon matPrefix>lock_open</mat-icon>
                <button mat-icon-button matSuffix type="button" (click)="hideNewPassword.set(!hideNewPassword())"
                    [disabled]="loading()">
                    <mat-icon>{{ hideNewPassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
                <mat-hint>Must be 8+ characters with uppercase, lowercase, number & special character</mat-hint>
            </mat-form-field>

            <!-- Confirm Password Field -->
            <mat-form-field appearance="fill">
                <mat-label>Confirm New Password</mat-label>
                <input matInput [type]="hideConfirmPassword() ? 'password' : 'text'" [(ngModel)]="confirmPassword"
                    name="confirmPassword" placeholder="Re-enter new password" required [disabled]="loading()" />
                <mat-icon matPrefix>lock_open</mat-icon>
                <button mat-icon-button matSuffix type="button"
                    (click)="hideConfirmPassword.set(!hideConfirmPassword())" [disabled]="loading()">
                    <mat-icon>{{ hideConfirmPassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
            </mat-form-field>

            <!-- Submit Button -->
            <button type="submit" class="submit-button"
                [disabled]="loading() || !currentPassword() || !newPassword() || !confirmPassword()">
                <ng-container *ngIf="loading(); else showButton">
                    <mat-spinner diameter="24"></mat-spinner>
                    Changing Password...
                </ng-container>
                <ng-template #showButton>
                    <mat-icon>check</mat-icon>
                    Change Password
                </ng-template>
            </button>
        </form>
    </div>
</div>